const dbService = require('../lib/services/db-service');

// removes existing data and loads test data into the database (requires environment variables for db authentication)
// NOTE: projects are linked to the grahambartley GitHub account which is expected to contain testdata repos.
// NOTE: the access token for grahambartley is given here for the purposes of testdata but normally this would not be public information!
async function loadTestData() {
  try {
    await dbService.query(`
      TRUNCATE users, dojos, github_integrations, projects, project_statistics;
      INSERT INTO users (id, email, name, type, dojos) VALUES ('ff67df02-6cbd-29c6-b2df-283e5136afec', 'champion1@example.com', 'Champion One', 'champion', '{"54b7f667-6c3c-acbd-bb4c-0911a6e7cd5d"}');
      INSERT INTO users (id, email, name, type, dojos) VALUES ('836473b4-4889-221a-9100-201994ff392d', 'champion2@example.com', 'Champion Two', 'champion', '{"18d376b4-22a4-ed8d-7355-9034bb7b0034"}');
      INSERT INTO users (id, email, name, type, dojos) VALUES ('27ab4d66-c3dw-d9f3-aa45-839402a7bee3', 'champion3@example.com', 'Champion Three', 'champion', '{"7382a5ff-bce6-9200-b3d2-aa76b12106b5"}');
      INSERT INTO users (id, email, name, type, dojos) VALUES ('d9989774-8319-442e-b0cd-8e940bb2f7bf', 'champion4@example.com', 'Champion Four', 'champion', '{"bb436a66-13ff-c456-1000-b3b4c88a7271"}');
      INSERT INTO users (id, email, name, type, dojos) VALUES ('028ddf02-6cbd-4b98-b2df-2531b136afec', 'parent1@example.com', 'Parent One', 'parent-guardian', '{"54b7f667-6c3c-acbd-bb4c-0911a6e7cd5d"}');
      INSERT INTO users (id, email, name, type, dojos) VALUES ('2293049b-6332-5611-fd54-920ab2029183', 'parent2@example.com', 'Parent Two', 'parent-guardian', '{"54b7f667-6c3c-acbd-bb4c-0911a6e7cd5d"}');
      INSERT INTO users (id, email, name, type, dojos) VALUES ('dff82fc7-aa6c-7821-1213-c78dc7f21133', 'parent3@example.com', 'Parent Three', 'parent-guardian', '{"54b7f667-6c3c-acbd-bb4c-0911a6e7cd5d"}');
      INSERT INTO users (id, email, name, type, dojos) VALUES ('12a4df02-6cbd-40b0-b2df-2531b136afec', 'youth1@example.com', 'Youth One', 'youth-o13', '{"54b7f667-6c3c-acbd-bb4c-0911a6e7cd5d"}');
      INSERT INTO users (id, email, name, type, dojos) VALUES ('b850ff0a-232e-a532-b672-839d9a99d291', 'youth2@example.com', 'Youth Two', 'youth-o13', '{"54b7f667-6c3c-acbd-bb4c-0911a6e7cd5d", "7382a5ff-bce6-9200-b3d2-aa76b12106b5"}');
      INSERT INTO users (id, email, name, type, dojos) VALUES ('c2818fa8-8188-7dd8-45bc-38200acc0f90', 'youth3@example.com', 'Youth Three', 'youth-o13', '{"18d376b4-22a4-ed8d-7355-9034bb7b0034"}');
      INSERT INTO users (id, email, name, type, dojos) VALUES ('fe281cd2-cc45-1930-0011-a67c329f91d2', 'youth4@example.com', 'Youth Four', 'youth-o13', '{"54b7f667-6c3c-acbd-bb4c-0911a6e7cd5d", "18d376b4-22a4-ed8d-7355-9034bb7b0034", "7382a5ff-bce6-9200-b3d2-aa76b12106b5"}');
      INSERT INTO users (id, email, name, type, dojos) VALUES ('464301e1-4b30-48ae-860f-d7de502ec7c9', 'cdfadmin1@example.com', 'CDFAdmin One', 'cdf-admin', '{}');
      INSERT INTO users (id, email, name, type, dojos) VALUES ('56a82e72-c3c3-4114-8b2f-efc111c671b5', 'cdfadmin2@example.com', 'CDFAdmin Two', 'cdf-admin', '{}');
      INSERT INTO users (id, email, name, type, dojos) VALUES ('bfee6af7-29e0-4e91-aeaa-f30328006ca5', 'cdfadmin3@example.com', 'CDFAdmin Three', 'cdf-admin', '{}');
      INSERT INTO dojos (id, name, champion_ids) VALUES ('54b7f667-6c3c-acbd-bb4c-0911a6e7cd5d', 'Awesome Dojo', '{"ff67df02-6cbd-29c6-b2df-283e5136afec"}');
      INSERT INTO dojos (id, name, champion_ids) VALUES ('18d376b4-22a4-ed8d-7355-9034bb7b0034', 'My Local Dojo', '{"836473b4-4889-221a-9100-201994ff392d"}');
      INSERT INTO dojos (id, name, champion_ids) VALUES ('7382a5ff-bce6-9200-b3d2-aa76b12106b5', 'School Dojo', '{"27ab4d66-c3dw-d9f3-aa45-839402a7bee3"}');
      INSERT INTO dojos (id, name, champion_ids) VALUES ('bb436a66-13ff-c456-1000-b3b4c88a7271', 'Library Dojo', '{"d9989774-8319-442e-b0cd-8e940bb2f7bf"}');
      INSERT INTO github_integrations (github_integration_id, dojo_id, user_id, github_access_token) VALUES ('b301386a-75cc-438d-873b-7fb8f937a9a0', '54b7f667-6c3c-acbd-bb4c-0911a6e7cd5d', 'ff67df02-6cbd-29c6-b2df-283e5136afec', '7a228ddbbae80dd492c1f6b02c649ca5d2f614a8');
      INSERT INTO projects (project_id, name, type, entrypoint, description, github_url, resource_url, created_at, updated_at, author, user_id, github_integration_id, deleted_at) VALUES ('f7f877f1-fea9-4451-9945-1d98fac2dcf4', 'Chess', 'python', 'Chess.py', 'Command line chess written in Python!', 'https://github.com/grahambartley/f7f877f1-fea9-4451-9945-1d98fac2dcf4', null, '2018-03-31 19:20:59.952', null, 'Youth One', '12a4df02-6cbd-40b0-b2df-2531b136afec', 'b301386a-75cc-438d-873b-7fb8f937a9a0', null);
      INSERT INTO projects (project_id, name, type, entrypoint, description, github_url, resource_url, created_at, updated_at, author, user_id, github_integration_id, deleted_at) VALUES ('3c5d3503-a6cc-4c78-b4fe-6a3d532a8c66', 'Chess', 'python', 'Chess.py', 'Command line chess program written in Python!', 'https://github.com/grahambartley/3c5d3503-a6cc-4c78-b4fe-6a3d532a8c66', null, '2018-03-31 19:33:04.642', null, 'Youth One', '12a4df02-6cbd-40b0-b2df-2531b136afec', 'b301386a-75cc-438d-873b-7fb8f937a9a0', '2018-04-02 10:43:06.22');
      INSERT INTO projects (project_id, name, type, entrypoint, description, github_url, resource_url, created_at, updated_at, author, user_id, github_integration_id, deleted_at) VALUES ('39cc1218-1cc0-46af-9608-eb841d252afc', 'Current Date and Time', 'javascript', 'index.js', 'Displays the current date and time in ISO format using momentjs.', 'https://github.com/grahambartley/39cc1218-1cc0-46af-9608-eb841d252afc', null, '2018-03-31 19:33:52.453', '2018-04-10 11:12:00.56', 'Youth One', '12a4df02-6cbd-40b0-b2df-2531b136afec', 'b301386a-75cc-438d-873b-7fb8f937a9a0', null);
      INSERT INTO projects (project_id, name, type, entrypoint, description, github_url, resource_url, created_at, updated_at, author, user_id, github_integration_id, deleted_at) VALUES ('ca681aea-ce69-4d89-bbc8-11db6f8e1ac3', 'My First Website', 'html', 'index.html', 'The first website I created as part of my sessions with Awesome Dojo!', 'https://github.com/grahambartley/ca681aea-ce69-4d89-bbc8-11db6f8e1ac3', null, '2018-03-31 19:35:28.402', '2018-04-14 23:20:56.232', 'Youth One', '12a4df02-6cbd-40b0-b2df-2531b136afec', 'b301386a-75cc-438d-873b-7fb8f937a9a0', null);
      INSERT INTO projects (project_id, name, type, entrypoint, description, github_url, resource_url, created_at, updated_at, author, user_id, github_integration_id, deleted_at) VALUES ('4fc3eb1c-abf6-4df2-8dc0-e7b3b9b3977a', 'Bank', 'python', 'Withdraw.py', 'A simple bank account program used to demonstrate OOP in Python.', 'https://github.com/grahambartley/4fc3eb1c-abf6-4df2-8dc0-e7b3b9b3977a', null, '2018-03-31 20:08:45.409', '2018-04-01 15:10:43.82', 'Youth Four', 'fe281cd2-cc45-1930-0011-a67c329f91d2', 'b301386a-75cc-438d-873b-7fb8f937a9a0', null);
      INSERT INTO projects (project_id, name, type, entrypoint, description, github_url, resource_url, created_at, updated_at, author, user_id, github_integration_id, deleted_at) VALUES ('d508227e-263a-4af8-ac9d-249a4a7dbe3f', 'Django Project', 'python', 'test.py', 'Prints out the current version of Django being used.', 'https://github.com/grahambartley/d508227e-263a-4af8-ac9d-249a4a7dbe3f', null, '2018-03-31 20:09:55.57', null, 'Youth One', '12a4df02-6cbd-40b0-b2df-2531b136afec', 'b301386a-75cc-438d-873b-7fb8f937a9a0', null);
      INSERT INTO projects (project_id, name, type, entrypoint, description, github_url, resource_url, created_at, updated_at, author, user_id, github_integration_id, deleted_at) VALUES ('4770f805-d425-480d-b841-280029eaeac2', 'My Second Website', 'html', 'index.html', 'The second website I created during my time with Awesome Dojo!', 'https://github.com/grahambartley/4770f805-d425-480d-b841-280029eaeac2', null, '2018-03-31 20:07:55.579', null, 'Youth Four', 'fe281cd2-cc45-1930-0011-a67c329f91d2', 'b301386a-75cc-438d-873b-7fb8f937a9a0', '2018-04-20 15:03:08.101');
      INSERT INTO projects (project_id, name, type, entrypoint, description, github_url, resource_url, created_at, updated_at, author, user_id, github_integration_id, deleted_at) VALUES ('80491c66-3e0e-412b-adea-a385773443cc', 'Shopping List', 'python', 'ShoppingList.py', 'A simple shopping list program.', 'https://github.com/grahambartley/80491c66-3e0e-412b-adea-a385773443cc', null, '2018-03-31 20:07:15.403', '2018-04-10 08:21:12.44', 'Youth Four', 'fe281cd2-cc45-1930-0011-a67c329f91d2', 'b301386a-75cc-438d-873b-7fb8f937a9a0', null);
      INSERT INTO projects (project_id, name, type, entrypoint, description, github_url, resource_url, created_at, updated_at, author, user_id, github_integration_id, deleted_at) VALUES ('82208249-1b5f-4334-80ff-8d88d8332bc1', 'Hello, World!', 'javascript', 'hello-world.js', 'A simple hello world program written in NodeJS.', 'https://github.com/grahambartley/82208249-1b5f-4334-80ff-8d88d8332bc1', null, '2018-03-31 20:06:08.841', null, 'Youth Four', 'fe281cd2-cc45-1930-0011-a67c329f91d2', 'b301386a-75cc-438d-873b-7fb8f937a9a0', null);
      INSERT INTO projects (project_id, name, type, entrypoint, description, github_url, resource_url, created_at, updated_at, author, user_id, github_integration_id, deleted_at) VALUES ('e93dba14-62c9-4776-bddf-1530fc940168', 'My Second Website', 'html', 'index.html', 'The second website I made with Awesome Dojo!', 'https://github.com/grahambartley/e93dba14-62c9-4776-bddf-1530fc940168', 'http://coderdojo.gitbooks.io/beginner-html-css/content/en/', '2018-04-01 20:49:15.515', null, 'Youth Four', 'fe281cd2-cc45-1930-0011-a67c329f91d2', 'b301386a-75cc-438d-873b-7fb8f937a9a0', null);
      INSERT INTO projects (project_id, name, type, entrypoint, description, github_url, resource_url, created_at, updated_at, author, user_id, github_integration_id, deleted_at) VALUES ('16433d6f-ea35-4119-9a1e-8e34222631bd', 'Castle Escape', 'java', 'Main.java', 'Castle Escape is a text-based adventure-puzzle game. The objective of the game is to escape the castle you find yourself in. There are various different rooms to the castle which you can travel through on your adventure. You may find items as you go along which you can collect. These will aid you in your escape! Items can only be used under specific circumstances, so think about when each item may be needed. It can be very useful to draw a map as you journey through the castle as its easy to get lost. Pay close attention to room and item descriptions as they may provide hints on what to do! Also be careful to only provide input when asked for it, otherwise glitches may occur which cause you to lose progress! Other than that, its up to you! Good luck escaping the castle!', 'https://github.com/grahambartley/16433d6f-ea35-4119-9a1e-8e34222631bd', 'https://coderdojo.gitbooks.io/beginner-java/content/en/coin_toss.html', '2018-03-31 20:10:48.91', '2018-04-20 14:32:10.143', 'Youth Four', 'fe281cd2-cc45-1930-0011-a67c329f91d2', 'b301386a-75cc-438d-873b-7fb8f937a9a0', null);
      INSERT INTO projects (project_id, name, type, entrypoint, description, github_url, resource_url, created_at, updated_at, author, user_id, github_integration_id, deleted_at) VALUES ('d0578aa0-96d9-4736-ad03-fcf568e5dc5b', 'Square Numbers', 'java', 'SquareNum.java', 'Squares given numbers.', 'https://github.com/grahambartley/d0578aa0-96d9-4736-ad03-fcf568e5dc5b', null, '2018-04-13 12:47:45.961', null, 'Youth Four', 'fe281cd2-cc45-1930-0011-a67c329f91d2', 'b301386a-75cc-438d-873b-7fb8f937a9a0', null);
      INSERT INTO projects (project_id, name, type, entrypoint, description, github_url, resource_url, created_at, updated_at, author, user_id, github_integration_id, deleted_at) VALUES ('c0d419d6-1d08-4052-ba27-30fb5acdf48f', 'Test 1', 'java', 'Main.java', 'Test', 'https://github.com/grahambartley/c0d419d6-1d08-4052-ba27-30fb5acdf48f', 'http://www.google.ie', '2018-04-01 15:40:08.981', null, 'Youth Four', 'fe281cd2-cc45-1930-0011-a67c329f91d2', 'b301386a-75cc-438d-873b-7fb8f937a9a0', null);
      INSERT INTO projects (project_id, name, type, entrypoint, description, github_url, resource_url, created_at, updated_at, author, user_id, github_integration_id, deleted_at) VALUES ('00876274-42af-465a-b251-0a5ab2b2b5fd', 'My Awesome Project', 'java', 'SquareNum.java', 'I hope this works.', 'https://github.com/grahambartley/00876274-42af-465a-b251-0a5ab2b2b5fd', null, '2018-04-10 12:20:43.888', null, 'Youth Four', 'fe281cd2-cc45-1930-0011-a67c329f91d2', 'b301386a-75cc-438d-873b-7fb8f937a9a0', null);
      INSERT INTO projects (project_id, name, type, entrypoint, description, github_url, resource_url, created_at, updated_at, author, user_id, github_integration_id, deleted_at) VALUES ('db66d80f-0de1-4a89-ab03-4e71a3ecb26d', 'Square Numbers', 'java', 'SquareNum.java', 'Squares numbers given in input until a -1 is given!', 'https://github.com/grahambartley/db66d80f-0de1-4a89-ab03-4e71a3ecb26d', null, '2018-04-11 18:19:44.999', null, 'Youth Four', 'fe281cd2-cc45-1930-0011-a67c329f91d2', 'b301386a-75cc-438d-873b-7fb8f937a9a0', null);
      INSERT INTO projects (project_id, name, type, entrypoint, description, github_url, resource_url, created_at, updated_at, author, user_id, github_integration_id, deleted_at) VALUES ('d9f1e025-d87d-41bb-8c1e-1f25b1890a1a', 'Sample Project', 'python', 'main.py', 'Hello World!', 'https://github.com/grahambartley/d9f1e025-d87d-41bb-8c1e-1f25b1890a1a', null, '2018-04-17 12:59:56.026', null, 'Youth Four', 'fe281cd2-cc45-1930-0011-a67c329f91d2', 'b301386a-75cc-438d-873b-7fb8f937a9a0', null);
      INSERT INTO project_statistics (project_statistics_id, project_id, plays) VALUES ('43b5d1dd-4d93-492e-9cf4-f8b40ce00c7f', 'f7f877f1-fea9-4451-9945-1d98fac2dcf4', 1169);
      INSERT INTO project_statistics (project_statistics_id, project_id, plays) VALUES ('35bc2bed-0f1b-4d21-9bf8-386a23db2247', '3c5d3503-a6cc-4c78-b4fe-6a3d532a8c66', 0);
      INSERT INTO project_statistics (project_statistics_id, project_id, plays) VALUES ('07324bdb-80c4-4e58-b209-e3fb45850aae', '39cc1218-1cc0-46af-9608-eb841d252afc', 1);
      INSERT INTO project_statistics (project_statistics_id, project_id, plays) VALUES ('628f99c6-7785-4a68-9a13-95309bd5ab28', 'ca681aea-ce69-4d89-bbc8-11db6f8e1ac3', 20);
      INSERT INTO project_statistics (project_statistics_id, project_id, plays) VALUES ('ac01cf04-fe35-4ffe-b999-69dbeaa819eb', '4fc3eb1c-abf6-4df2-8dc0-e7b3b9b3977a', 15);
      INSERT INTO project_statistics (project_statistics_id, project_id, plays) VALUES ('81d29a57-6aa9-40bf-88c8-333f568b0188', 'd508227e-263a-4af8-ac9d-249a4a7dbe3f', 59);
      INSERT INTO project_statistics (project_statistics_id, project_id, plays) VALUES ('dd7f0d55-9926-4493-9da1-1cfaac683984', '4770f805-d425-480d-b841-280029eaeac2', 6);
      INSERT INTO project_statistics (project_statistics_id, project_id, plays) VALUES ('c58aea38-1a66-48d0-976e-a29300e4e541', '80491c66-3e0e-412b-adea-a385773443cc', 1);
      INSERT INTO project_statistics (project_statistics_id, project_id, plays) VALUES ('9f0fcdb0-ecdf-4792-a0ba-cb885a86f059', '82208249-1b5f-4334-80ff-8d88d8332bc1', 1);
      INSERT INTO project_statistics (project_statistics_id, project_id, plays) VALUES ('1e357a08-e630-40e0-955e-8bad81167149', 'e93dba14-62c9-4776-bddf-1530fc940168', 2);
      INSERT INTO project_statistics (project_statistics_id, project_id, plays) VALUES ('8354f62d-7358-4bac-874f-4d499680075b', '16433d6f-ea35-4119-9a1e-8e34222631bd', 211);
      INSERT INTO project_statistics (project_statistics_id, project_id, plays) VALUES ('26fddc68-a11d-4663-8caf-4fe0dc76df7a', 'd0578aa0-96d9-4736-ad03-fcf568e5dc5b', 57);
      INSERT INTO project_statistics (project_statistics_id, project_id, plays) VALUES ('3f98f973-85b0-4d67-b466-44f3851edf2a', 'c0d419d6-1d08-4052-ba27-30fb5acdf48f', 88);
      INSERT INTO project_statistics (project_statistics_id, project_id, plays) VALUES ('8146be26-8b2a-4431-8ab9-d10ba12db1de', '00876274-42af-465a-b251-0a5ab2b2b5fd', 28);
      INSERT INTO project_statistics (project_statistics_id, project_id, plays) VALUES ('393ee5bf-7bfc-4f98-9e7f-0cd1a6f52720', 'db66d80f-0de1-4a89-ab03-4e71a3ecb26d', 106);
      INSERT INTO project_statistics (project_statistics_id, project_id, plays) VALUES ('a62f61a2-d013-4402-8804-143e265070b1', 'd9f1e025-d87d-41bb-8c1e-1f25b1890a1a', 1);
    `);  
  } catch (err) {
    console.log(err);
  }
}

// if not testing, load the test data
if (process.env.NODE_ENV !== 'test') {
  loadTestData();
}

module.exports = {
  loadTestData,
};
